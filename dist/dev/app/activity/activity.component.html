<sd-navbar class="activity"></sd-navbar>

<header *ngIf="activity" #section class="first-section">
    <div id="overlay"
         [class.non-fixed]="nonFixedBackground"
         [style.opacity]="sectionOpacity"
         [style.background-image]="'url(' + activity.images[0] + ')'"></div>
    <img [src]="activity.images[0]" class="hide" (error)="onErrorBg()">
    <div class="container animated fadeIn">
        <div class="intro-text" [style.opacity]="2 * sectionOpacity - 1">
            <div class="intro-heading">{{ activity.name }}</div>
            <div class="row">
                <div class="col-sm-4 col-sm-offset-2">
                    <div><i class="fa fa-fw fa-calendar"></i></div>
                    <div>
                        <span *ngIf="!activity.isAllDateEvent">
                              {{ activity.startTime }} - {{ activity.endTime }}</span>
                        <span *ngIf="activity.isAllDateEvent">All day</span>
                    </div>
                    <div>
                        {{ activity.startDate | date:'mediumDate' }} -
                        <span *ngIf="activity.endDateType === 2">
                              {{ activity.endDate | date:'mediumDate' }}</span>
                        <span *ngIf="activity.endDateType === 1">never end</span>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div><i class="fa fa-fw fa-map-marker"></i></div>
                    {{ activity.address }}
                </div>
            </div>
            <div class="row">
                <div *ngIf="eventPricePackages.length == 0" class="col-xs-12 text-center price">
                    <span *ngIf="activity.ticketPrice" class="bold">
                        USD {{ activity.ticketPrice }}</span>
                    <span *ngIf="!activity.ticketPrice" class="bold">
                        Free</span>
                </div>
                <div *ngIf="eventPricePackages && eventPricePackages.length > 0" 
                      class="col-xs-12 col-sm-4 col-sm-offset-4 text-center price">
                    <div class="font-dark form-group">
                        <select id="state" name="state" class="form-control input-lg" required>
                            <option value="" disabled selected>Select Pricing Tier</option>
                            <option *ngFor='let price of eventPricePackages'
                                    value="{{price.eventPriceId}}">USD {{price.price}} - {{price.priceName}}
                            </option>
                        </select>
                    </div>
                </div>
                <div *ngIf="!!ticketStatus && ticketStatus === 3" class="col-xs-12 text-center">
                    <a class="accept-button" (click)="registrationFormEl.open()">Accept Invitation</a>
                </div>
                <div *ngIf="!!ticketStatus && ticketStatus === 3" class="col-xs-12 text-center">
                    <a class="cancel-button" (click)="onClickRejectInvitation()">No thanks</a>
                </div>
                <div *ngIf="!!ticketStatus && ticketStatus !== 3" class="col-xs-12 text-center">
                    <a class="accepted-button">Status: {{ ticketStatusName }}</a>
                </div>
                <div *ngIf="paymentId && !!ticketStatus && ticketStatus === 8" class="col-xs-12 text-center">
                    <br>
                    <div paypalCheckout
                         [paymentId]="paymentId"
                         (onAuthorize)="executePayment($event)">
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
<div class="container">
    <div *ngIf="!!ticketDetail && !!ticketStatus && (ticketStatus === 1 || ticketStatus === 8)" class="well well-sm">
        <div class="row">
            <h3 class="col-xs-12 text-center">Ticket Detail</h3>
            <div class="col-xs-4">
                <div><strong>Full name</strong>: <span>{{ ticketDetail.fullName }}</span></div>
                <div><strong>Email</strong>: <span>{{ ticketDetail.email }}</span></div>
            </div>
            <div class="col-xs-4">
                <div><strong>Phone number</strong>: <span>{{ ticketDetail.phoneNumber }}</span></div>
                <div><strong>Organization</strong>: <span>{{ ticketDetail.organization }}</span></div>
            </div>
            <div class="col-xs-4">
                <div><strong>Address</strong>: <span>{{ ticketDetail.address }}</span></div>
                <div><strong>Verify code</strong>: <span>{{ ticketDetail.verifyCode }}</span></div>
            </div>
        </div>
    </div>
</div>
<section *ngIf="activity" class="container">
    <div class="row">
        <div class="col-sm-8">
            <h3>Description</h3>
            <div *ngIf="!!activity.description" class="text-grey"
                 [innerHTML]="activity.description | markdown"></div>
            <div *ngIf="!activity.description" class="text-grey">
                There are no description for this activity.
            </div>
        </div>
        <div class="col-sm-4">
            <h3>Repeat</h3>
            <div class="text-grey">
                {{ activity.repeatTypeName }}
                <span *ngIf="activity.repeatFrequency > 1">
                     - every {{ activity.repeatFrequency }}
                    <span *ngIf="activity.repeatType === 1">days</span>
                    <span *ngIf="activity.repeatType === 2">weeks,</span>
                    <span *ngIf="activity.repeatType === 3">months</span>
                </span>
            </div>
            <div *ngIf="activity.repeatType === 2" class="text-grey"> on:
                <span *ngIf="activity.isOccurMonday" class="label label-info">Monday</span>
                <span *ngIf="activity.isOccurTuesday" class="label label-info">Tuesday</span>
                <span *ngIf="activity.isOccurWednesday" class="label label-info">Wednesday</span>
                <span *ngIf="activity.isOccurThursday" class="label label-info">Thursday</span>
                <span *ngIf="activity.isOccurFriday" class="label label-info">Friday</span>
                <span *ngIf="activity.isOccurSaturday" class="label label-info">Saturday</span>
                <span *ngIf="activity.isOccurSunday" class="label label-info">Sunday</span>
            </div>
            <h3>Registration Time</h3>
            <div class="text-grey">
                {{ activity.registrationStartDate | date:'mediumDate' }} - {{ activity.registrationEndDate | date:'mediumDate' }}
            </div>
            <h3>Registered User(s)</h3>
            <div class="text-grey">
                <span *ngIf="activity.numberOfRegisteredUsers" class="bold">
                    {{ activity.numberOfRegisteredUsers}}</span>
                <span *ngIf="!activity.numberOfRegisteredUsers" class="bold">
                    0</span>
            </div>
            <h3>Available Ticket(s)</h3>
            <div class="text-grey">
                <span *ngIf="activity.capacity && activity.availableSlots" class="bold">
                    {{ activity.availableSlots }}</span>
                <span *ngIf="!activity.capacity" class="bold">
                    Unlimited tickets </span>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3>Photos</h3>
            <div *ngIf="!activity.images" class="text-grey">
                There are no photo for this activity.
            </div>
            <div *ngIf="!!activity.images" class="gallery-container">
                <a *ngFor="let image of activity.images" class="gallery"
                   href="{{ image }}" target="_blank"
                   [style.background-image]="'url(' + image + ')'">
                    <img [src]="image" (error)="onErrorBg()" class="hide">
                </a>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 class="text-center">Map View</h3>
            <div class="gallery-container">
                <img src="https://maps.googleapis.com/maps/api/staticmap?center={{ activity.latitude }},{{ activity.longitude }}&zoom=16&size=600x300&maptype=roadmap&markers=color:red%7Clabel:A%7C{{ activity.latitude }},{{ activity.longitude }}&key=AIzaSyAkdzOcR6yEpBmtHEuXxCQFYTSywnuckEI" alt="" width="100%">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12 text-center">
            <div class="sub-description">
                <a class="app-store" target="_blank" href="https://itunes.apple.com/us/app/freakick/id1199380713">
                    <img src="./assets/images/app-store-badge.png" alt="">
                </a>
                <a class="play-store" target="_blank" href="https://play.google.com/store/apps/details?id=com.enclave.freakick">
                    <img src="./assets/images/play-store-badge.png" alt="">
                </a>
            </div>
        </div>
    </div>
</section>

<sd-new-footer></sd-new-footer>

<frk-registration-form #registrationForm
                       [invitationToken]="invitationToken"
                       [invitationEmail]="email"
                       (success)="registerSuccess($event)">
</frk-registration-form>

<frk-join-freakick-form #joinFreakickForm>
</frk-join-freakick-form>