"use strict";
var City_1 = require('./City');
var State_1 = require('./State');
var Country_1 = require('./Country');
var constants_1 = require('../constants');
var User = (function () {
    function User(options) {
        this.lineAddress = '';
        this.postalCode = '';
        this.countryCode = 'US';
        this.cardNumber = '';
        this.expiration = '';
        this.cvc = '';
        this.cardType = '';
        this.userId = options && options.userId || null;
        this.captainOfTeam = options && options.captainOfTeam || null;
        this.email = options && options.email || '';
        this.password = options && options.password || '';
        this.userImage = options && options.userImage || '';
        this.userName = options && options.userName || '';
        this.fullName = options && options.fullName || '';
        this.firstName = options && options.fullName && options.fullName.substring(0, options.fullName.indexOf(' ')) || '';
        this.lastName = options && options.fullName && options.fullName.split(' ').pop() || '';
        this.level = options && options.level || null;
        this.levelLabel = options && options.levelLabel || '';
        this.currentExperience = options && options.currentExperience || null;
        this.distanceRangeUpToLevel = options && options.distanceRangeUpToLevel || null;
        this.maxExperience = options && options.maxExperience || null;
        this.playedGame = options && options.playedGame || 0;
        this.isFinishDemographicQuestion = options && options.isFinishDemographicQuestion || false;
        this.city = options && options.city && new City_1.City(options.city.cityId, options.city.cityName) || new City_1.City(-1, null);
        this.state = options && options.state && new State_1.State(options.state.stateId, options.state.stateName) || new State_1.State(-1, null);
        this.country = options && options.country
            && new Country_1.Country(options.country.countryId, options.country.countryName) || new Country_1.Country(-1, null);
        this.like = options && options.like || 0;
        this.follower = options && options.follower || 0;
        this.gamePlayed = options && options.gamePlayed || null;
        this.calcExperiencePercent();
    }
    User.getLogo = function (logo) {
        if (!logo || logo === 'null') {
            return './assets/images/default/user_logo.png';
        }
        else {
            if (logo.startsWith(constants_1.CONFIG.URL))
                return logo;
            return constants_1.CONFIG.URL + '/assets/' + logo;
        }
    };
    User.prototype.calcExperiencePercent = function () {
        try {
            this.expPercent = (1 - (this.maxExperience - this.currentExperience) / this.distanceRangeUpToLevel) * 100;
        }
        catch (error) {
            console.warn(error);
        }
    };
    Object.defineProperty(User.prototype, "userImage", {
        get: function () {
            return this._userImage;
        },
        set: function (value) {
            console.log(value);
            this._userImage = User.getLogo(value);
        },
        enumerable: true,
        configurable: true
    });
    return User;
}());
exports.User = User;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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QUN4QyxDQUFDO0lBQ0gsQ0FBQztJQU1NLG9DQUFxQixHQUE1QjtRQUNFLElBQUksQ0FBQztZQUNILElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxHQUFHLEdBQUcsQ0FBQztRQUM1RyxDQUFFO1FBQUEsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUNmLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdEIsQ0FBQztJQUNILENBQUM7SUErQkQsc0JBQUksMkJBQVM7YUFBYjtZQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDO1FBQ3pCLENBQUM7YUFFRCxVQUFjLEtBQWE7WUFDekIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNuQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDeEMsQ0FBQzs7O09BTEE7SUFNSCxXQUFDO0FBQUQsQ0E1RkEsQUE0RkMsSUFBQTtBQTVGWSxZQUFJLE9BNEZoQixDQUFBIiwiZmlsZSI6ImFwcC9tb2RlbHMvVXNlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvbGUgfSBmcm9tICcuL1JvbGUnO1xuaW1wb3J0IHsgUGFydG5lciB9IGZyb20gJy4vUGFydG5lcic7XG5pbXBvcnQgeyBDaXR5IH0gZnJvbSAnLi9DaXR5JztcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi9TdGF0ZSc7XG5pbXBvcnQgeyBDb3VudHJ5IH0gZnJvbSAnLi9Db3VudHJ5JztcblxuaW1wb3J0IHsgQ09ORklHIH0gZnJvbSAnLi4vY29uc3RhbnRzJztcblxuZXhwb3J0IGludGVyZmFjZSBJVXNlck9wdGlvbnMge1xuICB1c2VySWQ6IG51bWJlcjtcbiAgY2FwdGFpbk9mVGVhbTogbnVtYmVyO1xuICBlbWFpbDogc3RyaW5nO1xuICBwYXNzd29yZDogc3RyaW5nO1xuICB1c2VySW1hZ2U6IHN0cmluZztcbiAgdXNlck5hbWU6IHN0cmluZztcbiAgZnVsbE5hbWU6IHN0cmluZztcbiAgbGV2ZWw6IG51bWJlcjtcbiAgbGV2ZWxMYWJlbDogc3RyaW5nO1xuICBjdXJyZW50RXhwZXJpZW5jZTogbnVtYmVyO1xuICBkaXN0YW5jZVJhbmdlVXBUb0xldmVsOiBudW1iZXI7XG4gIG1heEV4cGVyaWVuY2U6IG51bWJlcjtcbiAgcGxheWVkR2FtZTogbnVtYmVyO1xuICBpc0ZpbmlzaERlbW9ncmFwaGljUXVlc3Rpb246IGJvb2xlYW47XG4gIHBhcnRuZXI6IFBhcnRuZXI7XG4gIGlzQWxsb3dSZWNlaXZlSW52aXRhdGlvbj86IGJvb2xlYW47XG4gIHVzZXJSb2xlPzogUm9sZTtcbiAgaXNEaXNwbGF5SGVscEd1aWxkPzogYm9vbGVhbjtcbiAgZ29sZD86IG51bWJlcjtcbiAgY2l0eTogQ2l0eTtcbiAgc3RhdGU6IFN0YXRlO1xuICBjb3VudHJ5OiBDb3VudHJ5O1xuICBmb2xsb3dlcjogbnVtYmVyO1xuICBnYW1lUGxheWVkOiB7Z3VpbGQ6IG51bWJlciwgcGlja3VwOiBudW1iZXIsIGxlYWd1ZTogbnVtYmVyfTtcbiAgbGlrZTogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgVXNlciB7XG4gIHB1YmxpYyB1c2VySWQ6IG51bWJlcjtcbiAgcHVibGljIGNhcHRhaW5PZlRlYW06IG51bWJlcjtcbiAgcHVibGljIGVtYWlsOiBzdHJpbmc7XG4gIHB1YmxpYyBwYXNzd29yZDogc3RyaW5nO1xuICBwdWJsaWMgdXNlck5hbWU6IHN0cmluZztcbiAgcHVibGljIGZ1bGxOYW1lOiBzdHJpbmc7XG4gIHB1YmxpYyBmaXJzdE5hbWU6IHN0cmluZztcbiAgcHVibGljIGxhc3ROYW1lOiBzdHJpbmc7XG4gIHB1YmxpYyBsZXZlbDogbnVtYmVyO1xuICBwdWJsaWMgbGV2ZWxMYWJlbDogc3RyaW5nO1xuICBwdWJsaWMgY3VycmVudEV4cGVyaWVuY2U6IG51bWJlcjtcbiAgcHVibGljIGRpc3RhbmNlUmFuZ2VVcFRvTGV2ZWw6IG51bWJlcjtcbiAgcHVibGljIG1heEV4cGVyaWVuY2U6IG51bWJlcjtcbiAgcHVibGljIHBsYXllZEdhbWU6IG51bWJlcjtcbiAgcHVibGljIGlzRmluaXNoRGVtb2dyYXBoaWNRdWVzdGlvbjogYm9vbGVhbjtcbiAgcHVibGljIGV4cFBlcmNlbnQ6IG51bWJlcjtcbiAgcHVibGljIGxpbmVBZGRyZXNzOiBzdHJpbmcgPSAnJztcbiAgcHVibGljIGNpdHk6IENpdHk7XG4gIHB1YmxpYyBwb3N0YWxDb2RlOiBzdHJpbmcgPSAnJztcbiAgcHVibGljIHN0YXRlOiBTdGF0ZTtcbiAgcHVibGljIGNvdW50cnlDb2RlOiBzdHJpbmcgPSAnVVMnO1xuICBwdWJsaWMgY291bnRyeTogQ291bnRyeTtcbiAgcHVibGljIGZvbGxvd2VyOiBudW1iZXI7XG4gIHB1YmxpYyBnYW1lUGxheWVkOiB7Z3VpbGQ6IG51bWJlciwgcGlja3VwOiBudW1iZXIsIGxlYWd1ZTogbnVtYmVyfTtcbiAgcHVibGljIGxpa2U6IG51bWJlcjtcbiAgcHVibGljIHBhcnRuZXI6IFBhcnRuZXI7XG4gIHB1YmxpYyBjYXJkTnVtYmVyOiBzdHJpbmcgPSAnJztcbiAgcHVibGljIGV4cGlyYXRpb246IHN0cmluZyA9ICcnO1xuICBwdWJsaWMgY3ZjOiBzdHJpbmcgPSAnJztcbiAgcHVibGljIGNhcmRUeXBlOiBzdHJpbmcgPSAnJztcblxuICBwcml2YXRlIF91c2VySW1hZ2U6IHN0cmluZztcblxuICBwdWJsaWMgc3RhdGljIGdldExvZ28obG9nbzogc3RyaW5nKSB7XG4gICAgaWYgKCFsb2dvIHx8IGxvZ28gPT09ICdudWxsJykge1xuICAgICAgcmV0dXJuICcuL2Fzc2V0cy9pbWFnZXMvZGVmYXVsdC91c2VyX2xvZ28ucG5nJztcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGxvZ28uc3RhcnRzV2l0aChDT05GSUcuVVJMKSkgcmV0dXJuIGxvZ287XG4gICAgICByZXR1cm4gQ09ORklHLlVSTCArICcvYXNzZXRzLycgKyBsb2dvO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZXhwIHBlcmNlbnQgb2YgY3VycmVudCBsZXZlbCBhbmQgbmV4dCBsZXZlbFxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgcHVibGljIGNhbGNFeHBlcmllbmNlUGVyY2VudCgpIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5leHBQZXJjZW50ID0gKDEgLSAodGhpcy5tYXhFeHBlcmllbmNlIC0gdGhpcy5jdXJyZW50RXhwZXJpZW5jZSkgLyB0aGlzLmRpc3RhbmNlUmFuZ2VVcFRvTGV2ZWwpICogMTAwO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCk7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IElVc2VyT3B0aW9ucyk7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBJVXNlck9wdGlvbnMpIHtcbiAgICB0aGlzLnVzZXJJZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy51c2VySWQgfHwgbnVsbDtcbiAgICB0aGlzLmNhcHRhaW5PZlRlYW0gPSBvcHRpb25zICYmIG9wdGlvbnMuY2FwdGFpbk9mVGVhbSB8fCBudWxsO1xuICAgIHRoaXMuZW1haWwgPSBvcHRpb25zICYmIG9wdGlvbnMuZW1haWwgfHwgJyc7XG4gICAgdGhpcy5wYXNzd29yZCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5wYXNzd29yZCB8fCAnJztcbiAgICB0aGlzLnVzZXJJbWFnZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy51c2VySW1hZ2UgfHwgJyc7XG4gICAgdGhpcy51c2VyTmFtZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy51c2VyTmFtZSB8fCAnJztcbiAgICB0aGlzLmZ1bGxOYW1lID0gb3B0aW9ucyAmJiBvcHRpb25zLmZ1bGxOYW1lIHx8ICcnO1xuICAgIHRoaXMuZmlyc3ROYW1lID0gb3B0aW9ucyAmJiBvcHRpb25zLmZ1bGxOYW1lICYmIG9wdGlvbnMuZnVsbE5hbWUuc3Vic3RyaW5nKDAsIG9wdGlvbnMuZnVsbE5hbWUuaW5kZXhPZignICcpKSB8fCAnJztcbiAgICB0aGlzLmxhc3ROYW1lID0gb3B0aW9ucyAmJiBvcHRpb25zLmZ1bGxOYW1lICYmIG9wdGlvbnMuZnVsbE5hbWUuc3BsaXQoJyAnKS5wb3AoKSB8fCAnJztcbiAgICB0aGlzLmxldmVsID0gb3B0aW9ucyAmJiBvcHRpb25zLmxldmVsIHx8IG51bGw7XG4gICAgdGhpcy5sZXZlbExhYmVsID0gb3B0aW9ucyAmJiBvcHRpb25zLmxldmVsTGFiZWwgfHwgJyc7XG4gICAgdGhpcy5jdXJyZW50RXhwZXJpZW5jZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5jdXJyZW50RXhwZXJpZW5jZSB8fCBudWxsO1xuICAgIHRoaXMuZGlzdGFuY2VSYW5nZVVwVG9MZXZlbCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5kaXN0YW5jZVJhbmdlVXBUb0xldmVsIHx8IG51bGw7XG4gICAgdGhpcy5tYXhFeHBlcmllbmNlID0gb3B0aW9ucyAmJiBvcHRpb25zLm1heEV4cGVyaWVuY2UgfHwgbnVsbDtcbiAgICB0aGlzLnBsYXllZEdhbWUgPSBvcHRpb25zICYmIG9wdGlvbnMucGxheWVkR2FtZSB8fCAwO1xuICAgIHRoaXMuaXNGaW5pc2hEZW1vZ3JhcGhpY1F1ZXN0aW9uID0gb3B0aW9ucyAmJiBvcHRpb25zLmlzRmluaXNoRGVtb2dyYXBoaWNRdWVzdGlvbiB8fCBmYWxzZTtcbiAgICB0aGlzLmNpdHkgPSBvcHRpb25zICYmIG9wdGlvbnMuY2l0eSAmJiBuZXcgQ2l0eShvcHRpb25zLmNpdHkuY2l0eUlkLCBvcHRpb25zLmNpdHkuY2l0eU5hbWUpIHx8IG5ldyBDaXR5KC0xLCBudWxsKTtcbiAgICB0aGlzLnN0YXRlID0gb3B0aW9ucyAmJiBvcHRpb25zLnN0YXRlICYmIG5ldyBTdGF0ZShvcHRpb25zLnN0YXRlLnN0YXRlSWQsIG9wdGlvbnMuc3RhdGUuc3RhdGVOYW1lKSB8fCBuZXcgU3RhdGUoLTEsIG51bGwpO1xuICAgIHRoaXMuY291bnRyeSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5jb3VudHJ5XG4gICAgICAmJiBuZXcgQ291bnRyeShvcHRpb25zLmNvdW50cnkuY291bnRyeUlkLCBvcHRpb25zLmNvdW50cnkuY291bnRyeU5hbWUpIHx8IG5ldyBDb3VudHJ5KC0xLCBudWxsKTtcbiAgICB0aGlzLmxpa2UgPSBvcHRpb25zICYmIG9wdGlvbnMubGlrZSB8fCAwO1xuICAgIHRoaXMuZm9sbG93ZXIgPSBvcHRpb25zICYmIG9wdGlvbnMuZm9sbG93ZXIgfHwgMDtcbiAgICB0aGlzLmdhbWVQbGF5ZWQgPSBvcHRpb25zICYmIG9wdGlvbnMuZ2FtZVBsYXllZCB8fCBudWxsO1xuICAgIHRoaXMuY2FsY0V4cGVyaWVuY2VQZXJjZW50KCk7XG4gIH1cblxuICBnZXQgdXNlckltYWdlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX3VzZXJJbWFnZTtcbiAgfVxuXG4gIHNldCB1c2VySW1hZ2UodmFsdWU6IHN0cmluZykge1xuICAgIGNvbnNvbGUubG9nKHZhbHVlKTtcbiAgICB0aGlzLl91c2VySW1hZ2UgPSBVc2VyLmdldExvZ28odmFsdWUpO1xuICB9XG59XG5cbiJdfQ==
