"use strict";
var Message = (function () {
    function Message(messageType, data) {
        this.messageType = messageType;
        this.data = data;
    }
    Message.fromJSON = function (messageText) {
        var result = null;
        var wrapper = JSON.parse(messageText);
        if (wrapper.data && 'EMPTY' !== wrapper.data.toUpperCase()) {
            if (wrapper.data.startsWith('{')) {
                result = new Message(wrapper.messageType, JSON.parse(wrapper.data));
            }
            else {
                result = new Message(wrapper.messageType, wrapper.data);
            }
        }
        else {
            result = new Message(wrapper.messageType);
        }
        return result;
    };
    Message.prototype.toJSON = function () {
        return JSON.stringify({
            'messageType': this.messageType,
            'data': this.data ? JSON.stringify(this.data) : 'EMPTY'
        });
    };
    return Message;
}());
exports.Message = Message;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9tb2RlbHMvTWVzc2FnZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7SUE2QkUsaUJBQVksV0FBbUIsRUFBRSxJQUFVO1FBQ3pDLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO1FBQy9CLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0lBQ25CLENBQUM7SUF4Qk0sZ0JBQVEsR0FBZixVQUFnQixXQUFtQjtRQUNqQyxJQUFJLE1BQU0sR0FBWSxJQUFJLENBQUM7UUFDM0IsSUFBSSxPQUFPLEdBQVEsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUUzQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLE9BQU8sS0FBSyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUMzRCxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2pDLE1BQU0sR0FBRyxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDdEUsQ0FBQztZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNOLE1BQU0sR0FBRyxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMxRCxDQUFDO1FBQ0gsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ04sTUFBTSxHQUFHLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUM1QyxDQUFDO1FBQ0QsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUNoQixDQUFDO0lBZ0JELHdCQUFNLEdBQU47UUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQztZQUNwQixhQUFhLEVBQUUsSUFBSSxDQUFDLFdBQVc7WUFDL0IsTUFBTSxFQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsT0FBTztTQUN4RCxDQUFDLENBQUM7SUFDTCxDQUFDO0lBQ0gsY0FBQztBQUFELENBNUNBLEFBNENDLElBQUE7QUE1Q1ksZUFBTyxVQTRDbkIsQ0FBQSIsImZpbGUiOiJhcHAvbW9kZWxzL01lc3NhZ2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgTWVzc2FnZSB7XG4gIG1lc3NhZ2VUeXBlOiBzdHJpbmc7XG4gIGRhdGE6IGFueTtcblxuICAvKipcbiAgICogUGFyc2UgSlNPTlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZVRleHRcbiAgICovXG4gIHN0YXRpYyBmcm9tSlNPTihtZXNzYWdlVGV4dDogc3RyaW5nKSB7XG4gICAgbGV0IHJlc3VsdDogTWVzc2FnZSA9IG51bGw7XG4gICAgbGV0IHdyYXBwZXI6IGFueSA9IEpTT04ucGFyc2UobWVzc2FnZVRleHQpO1xuXG4gICAgaWYgKHdyYXBwZXIuZGF0YSAmJiAnRU1QVFknICE9PSB3cmFwcGVyLmRhdGEudG9VcHBlckNhc2UoKSkge1xuICAgICAgaWYgKHdyYXBwZXIuZGF0YS5zdGFydHNXaXRoKCd7JykpIHtcbiAgICAgICAgcmVzdWx0ID0gbmV3IE1lc3NhZ2Uod3JhcHBlci5tZXNzYWdlVHlwZSwgSlNPTi5wYXJzZSh3cmFwcGVyLmRhdGEpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCA9IG5ldyBNZXNzYWdlKHdyYXBwZXIubWVzc2FnZVR5cGUsIHdyYXBwZXIuZGF0YSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdCA9IG5ldyBNZXNzYWdlKHdyYXBwZXIubWVzc2FnZVR5cGUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlVHlwZSBbVHlwZSBvZiBtZXNzYWdlLCBleGFtcGxlOiAnR0VUX0JBVFRMRV9GSUVMRCddXG4gICAqIEBwYXJhbSB7YW55fSAgICBkYXRhICAgICAgICBbZGF0YSBvZiByZXF1ZXN0L3Jlc3BvbnNlIG1lc3NhZ2VdXG4gICAqL1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlVHlwZTogc3RyaW5nLCBkYXRhPzogYW55KSB7XG4gICAgdGhpcy5tZXNzYWdlVHlwZSA9IG1lc3NhZ2VUeXBlO1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBpbnB1dCBkYXRhIHRvIEpTT05cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9KU09OKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICdtZXNzYWdlVHlwZSc6IHRoaXMubWVzc2FnZVR5cGUsXG4gICAgICAnZGF0YSc6IHRoaXMuZGF0YSA/IEpTT04uc3RyaW5naWZ5KHRoaXMuZGF0YSkgOiAnRU1QVFknXG4gICAgfSk7XG4gIH1cbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbiJdfQ==
